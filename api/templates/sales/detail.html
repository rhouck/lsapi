{% extends 'base.html' %}

{% block content %}

  {% if error_message %}<p style="color: red;">{{ error_message }}</p>{% endif %}

  <h1>{{ detail }}</h1>
  <h3>Open Contracts</h3>
  <ul>
  {% for contract in detail.contract_set.all %}
      {% if contract.outstanding %}
        <li>
        Key: {{contract.search.key}}, Purchase: {{contract}}, Expiration: {{contract.search.exp_date}}, Option price: {{contract.search.holding_price}}, Locked Fare: {{contract.search.locked_fare}}, Exercised Fare: {{contract.ex_fare}}, <a href="{% url add_to_staging 'exercise' contract.search.key %}">Exercise</a>, <a href="{% url add_to_staging 'refund' contract.search.key %}">Refund</a>
        </li>
    {% endif %}
  {% endfor %}
  </ul>

  <h3>Closed Contracts</h3>
  <ul>
  {% for contract in detail.contract_set.all %}
      {% if not contract.outstanding %}
        <li>
        Key: {{contract.search.key}}, Purchase: {{contract}}, Expiration: {{contract.search.exp_date}}, Option price: {{contract.search.holding_price}}, Locked Fare: {{contract.search.locked_fare}}, Exercised Fare: {{contract.ex_fare}}
        </li>
    {% endif %}
  {% endfor %}
  </ul>

{% endblock %}


